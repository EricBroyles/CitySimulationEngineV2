Cars should have 1 step per second. (70 mph max -> 10 cells/sec, so for each step I want the car to travel approx 10 cells)
Humans should have 1 step per 5 seconds (3 mph max -> .44 cells/sec, so 2.2 cells)
OR: have a speed differential, run extra steps proportional to speed of the agent. 




Godot:

var input: InputPackage = InputPackage.new()
input.set_image_matrices(tt,tm,dir,speed)
input.set_sec_per_step(...)
input.set_feet_per_cell(...)
input.set_num_steps(...)
input.set_num_humans(...)
input.set_personal_vehicle_ownership_rate(...)
var sim: Simulation = Simulation.new()
sim.setup(input)
Loop until sim.is_done() {
    var output: OutputPackage = sim.step()
    output.get_agents_image() -> use this to update the texture and send to shader
}

C++ (Image Data)
InputPackage: set in godot, get in C++
* Recieves Godot::Image -> stores as ImageMatrix<type> -> getters return Matrix<type>

ImageMatrix<type>
* used to enforce a type to an Image with data of a specific type

OutputPackage: set in C++, get in godot
* Recieves a Matrix<type> -> stores as ImageMatrix<type> -> getters return godot::Image









TT Matrix: R8, uint8 -> val
TM Matrix: R8, uint8 -> val
Direction Matrix: R8, uint8 -> val
Speed Matrix: R8, uint8, sec_pre_step, feet_per_step -> val

Agents:
ID: 4096, RGBA8, int32 -> val
other information packed in 256x256

I want to convert speed, tt, tm, direction into matrix of their respective values.
change ImageMatrix to wrap a Matrix let this handle the conversions

Matrix::create_speed_matrix -> Matrix<Speed> //handle the neccisary checks R8 inputs...






TODO:
* put timing stuff into my_timing and make it more organized. (add a test to explicitly show the time to go Image to Matrix, and Matrix to ImageTexture)
* can walk between and can drive between

BaseWorld Improvements:
* stop using ImageMatrix: reading from godot image is slow
* switch to Matrix<TT>, Matrix<TM>, Matrix<Dir>, Matrix<Speed>. When creating from images use get_data() from the image not a for loop.

CM: currently it is aroun 5.5 seconds
* Baseworld will make it better.
* can reduce the amount of checks by looping over inside, then looping over edges. dont need to check the corners.

Agents:
* I think I still need an image just update from a bitarray.














BaseWorld
ConnectivityMatrix
Parking
...
World: BaseWorld



Agents and Humans and Car. Agents is defined after Human and Car and so cannot see Agents. 


Agents:
* need to allow multiple agents (humans) on the same tile

StepDrawPackage
* each cell in world sized image has an id that points to location in smaller images that are more proportional to the size of the agents
* 65,000 agents 256x256 image. 
* this draw package is gathered by godot and then sent down to sahder to be drawn.
* information needed to draw agents: 2 steps a then and a now to then smoothly move between them.
*   location: infered from location in the world image (dont need to use any bits)
*   orientation: 3 bits
*   type: human or car
*   

location, orientation, human or car, human inside car, car parked, human not moving 
car and human can be on the same tile. 